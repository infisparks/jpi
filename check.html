 <!-- Firebase SDK -->
 <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCt_2hlmYjIpWsxSMpXNOwmpPzwyNnIiB8",
        authDomain: "the-times-e4a65.firebaseapp.com",
        databaseURL: "https://the-times-e4a65-default-rtdb.firebaseio.com",
        projectId: "the-times-e4a65",
        storageBucket: "the-times-e4a65.appspot.com",
        messagingSenderId: "958497728175",
        appId: "1:958497728175:web:60fcdfdf97564fe083165a",
        measurementId: "G-BLT9FRR41R"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const productsRef = ref(database, 'products/');

    let allProducts = []; // Store all products globally

    // Function to fetch products from Firebase and store them
    function fetchProducts() {
        onValue(productsRef, (snapshot) => {
            allProducts = []; // Reset global product list

            snapshot.forEach(childSnapshot => {
                const product = childSnapshot.val();
                allProducts.push(product);
            });

            // Display all products initially
            displayProducts(allProducts);
        });
    }

    // Function to display products dynamically
    function displayProducts(products) {
        const productList = document.getElementById('product-list');
        productList.innerHTML = ''; // Clear previous products

        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card', 'bg-white', 'rounded-lg', 'shadow-md', 'p-4', 'text-center');
            productCard.innerHTML = `
                <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover rounded">
                <h3 class="text-lg font-semibold mt-2">${product.name}</h3>
                <p class="text-gray-600">${product.description}</p>
                <p class="text-xl font-semibold mt-3">₹${product.price}</p>
                <a href="https://api.whatsapp.com/send/?phone=916290563943&text=I%20want%20to%20buy%20${encodeURIComponent(product.name)}%20for%20₹${product.price}&type=phone_number&app_absent=0"
                   class="inline-block px-6 py-2 bg-blue-600 text-white rounded-md mt-3 hover:bg-blue-700 transition">
                    Buy Now
                </a>
            `;
            productList.appendChild(productCard);
        });
    }

    // Function to search products dynamically
    window.searchProducts = function () {
        const searchQuery = document.getElementById('search-bar').value.toLowerCase();
        const filteredProducts = allProducts.filter(product =>
            product.name.toLowerCase().includes(searchQuery)
        );
        displayProducts(filteredProducts);
    };

    // Fetch products on page load
    window.onload = fetchProducts;
</script>
